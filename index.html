<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Slot Machine</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #222;
            color: #fff;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            margin: 0;
        }

        .slot-machine {
            position: relative;
            display: flex;
            flex-direction: column;
            align-items: center;
            width: 250px;
            height: 200px;
            border: 5px solid #ffcc00;
            border-radius: 10px;
            background-color: #333;
            box-shadow: 0 0 20px rgba(255, 204, 0, 0.8);
        }

        .slot-display {
            width: 90%;
            height: 160px;
			margin: 40px auto;
            background: black;
            overflow: hidden;
            display: flex;
            justify-content: center;
            align-items: center;
            border: 3px solid #fff;
            border-radius: 5px;
            position: relative;
        }

        .slot-items {
            position: absolute;
            top: 40;
            display: flex;
            flex-direction: column;
            align-items: center;
            width: 100%;
            animation: none;
        }

        .slot-item {
            font-size: 1.2rem;
            font-weight: bold;
            color: #ffcc00;
            height: 20px;
            line-height: 20px;
            text-align: center;
        }

        .lever {
            position: absolute;
            right: -30px;
            top: 50px;
            width: 20px;
            height: 100px;
            background-color: #666;
            border-radius: 15px;
            cursor: pointer;
        }

        .lever:active {
            transform: rotate(20deg);
        }

        .lever-ball {
            position: absolute;
            bottom: 100px;
            left: 0px;
            width: 20px;
            height: 20px;
            background-color: red;
            border-radius: 50%;
            box-shadow: 0 0 10px rgba(255, 0, 0, 0.8);
        }

        .options-panel {
            margin-top: 20px;
            display: flex;
            justify-content: center;
        }

        .options-panel select {
            padding: 10px;
            font-size: 1rem;
            background-color: #444;
            color: #fff;
            border: 2px solid #ffcc00;
            border-radius: 5px;
            cursor: pointer;
        }

        .title {
            padding: 10px;
			margin-top: 0px;
            margin-bottom: 30px;
            width: 1000px;
			font-size: 1.3rem;
            color: #ffcc00;
            text-align: center;
        }
        .label {
            padding: 10px;
			margin-top: 20px;
            width: 250px;
			font-size: 1.3rem;
            color: #ffcc00;
            text-align: center;
        }
        .modal {
            display: none;
            position: fixed;
            z-index: 1;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgb(0,0,0);
            background-color: rgba(0,0,0,0.4);
        }
        .modal-content {
            background-color: #333;
            margin: 15% auto;
            padding: 20px;
            border: 1px solid #888;
            width: 80%;
            color: #fff;
        }

        @keyframes spin {
            from {
                transform: translateY(0);
            }
            to {
                transform: translateY(-100%);
            }
        }
    </style>
</head>
<body>
    <div id="infoModal" class="modal">
        <div class="modal-content">
            <p>Sie haben einen schlechten Tag? Wer kennt es nicht: Gerade haben Ihnen Ihre Eltern eröffnet, dass sie adoptiert sind, ihre Frau ist ihnen davongelaufen und der Kollege hat ihnen die Beförderung vor der Nase weggeschnappt.
    Sonst gelingt auch nicht besonders viel. Daran muss jemand anderes Schuld sein, ganz klar! Es kann überhaupt nicht anders sein, als das eine übergroße dunkle Macht, eine zwielichtige Gruppierung oder ihr persönlicher Feind dahinter steckt.
    Sie haben es schließlich schon immer gewusst!<br /><br />
            Wir präsentieren den <b>Schuld-O-Mat</b>!</p>
            <button id="closeModal">Ok</button>
        </div>
    </div>
    <div class="title" id="title">
		<h2>Schuld-O-Mat</h2>
        <div class="info-icon" id="infoIcon">
            &#9432;
        </div><br />
        Wer heute Schuld hat:
    </div>
    <div class="slot-machine">
        <div class="slot-display">
            <div class="slot-items" id="slotItems">
                <div class="slot-item">START</div>
            </div>
        </div>
        <div class="lever" id="lever">
            <div class="lever-ball"></div>
        </div>
    </div>

    <div class="label" id="label">Ich fühle mich:</div>
    <div class="options-panel">
        <select id="modeSelector">
            <option value="general">Unentschieden</option>
            <option value="normal">Wütend</option>
            <option value="nerdy">Nerdy</option>
            <option value="radical">"Gesunder Menschenverstand"</option>
            <option value="conspiracy">"Aufgeklärt"</option>
        </select>
    </div>

    <!-- Slot Machine Variables -->
    <script src="slotmachine.js"></script>

    <!-- Slot Machine Movements -->
    <script text="type/javascript">
        const slotItemsContainer = document.getElementById('slotItems');
        const lever = document.getElementById('lever');
        const modeSelector = document.getElementById('modeSelector');
        const resultDisplay = document.getElementById('result');

        const leverSound = new Audio('ka-ching.mp3');
        const stopSound = new Audio('mixkit-magical-coin-win-1936.wav');

        let spinning;

        function startSpin(names) {
            slotItemsContainer.style.animation = 'none';
            slotItemsContainer.innerHTML = names.map(name => `<div class="slot-item">${name}</div>`).join('');

            setTimeout(() => {
                slotItemsContainer.style.animation = `spin 0.1s linear infinite`;
            }, 10);
        }

        function stopSpin(names) {
            clearInterval(spinning);
            const finalName = names[Math.floor(Math.random() * names.length)];
            slotItemsContainer.style.animation = 'none';
            slotItemsContainer.innerHTML = `<div class="slot-item">${finalName}</div>`;
            resultDisplay.textContent = `The machine stopped on: ${finalName}`;
			stopSound.play(); // Play stop sound
		}

        lever.addEventListener('click', () => {
			// Play lever sound
			leverSound.play();

			// Animate the lever
            lever.style.transform = 'rotate(20deg)';
            setTimeout(() => {
                lever.style.transform = 'rotate(0deg)';
            }, 200);

            // Start spinning
            const mode = modeSelector.value;
            const names = namePools[mode];
            startSpin(names);

            // Stop spinning after 3 seconds
            setTimeout(() => {
                stopSpin(names);
            }, 3000);
        });
    </script>

    <!-- Modal -->
    <script text="type/javascript">
        const infoIcon = document.getElementById('infoIcon');
        const infoModal = document.getElementById('infoModal');
        const closeModal = document.getElementById('closeModal');

        infoIcon.addEventListener('click', () => {
            infoModal.style.display = 'block';
        });

        closeModal.addEventListener('click', () => {
            infoModal.style.display = 'none';
        });
        </script>
</body>
</html>